# ğŸ” à¦²à¦—à¦‡à¦¨ à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦® à¦à¦¬à¦‚ à¦®à¦¿à¦¡à¦²à¦“à¦¯à¦¼à§à¦¯à¦¾à¦° - à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦«à§à¦²à§‹ à¦¡à¦¾à¦¯à¦¼à¦¾à¦—à§à¦°à¦¾à¦®

## ğŸ“Š à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦²à¦—à¦‡à¦¨ à¦«à§à¦²à§‹ à¦¡à¦¾à¦¯à¦¼à¦¾à¦—à§à¦°à¦¾à¦®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER LOGIN REQUEST                               â”‚
â”‚                    POST /api/auth/login/                                 â”‚
â”‚                    { username, password }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 1: Django Request Processing                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. SecurityMiddleware                                            â”‚  â”‚
â”‚  â”‚  2. WhiteNoiseMiddleware                                          â”‚  â”‚
â”‚  â”‚  3. SessionMiddleware                                             â”‚  â”‚
â”‚  â”‚  4. CommonMiddleware                                              â”‚  â”‚
â”‚  â”‚  5. CsrfViewMiddleware                                            â”‚  â”‚
â”‚  â”‚  6. AuthenticationMiddleware â† JWT Token Check à¦•à¦°à§‡               â”‚  â”‚
â”‚  â”‚  7. MessageMiddleware                                             â”‚  â”‚
â”‚  â”‚  8. ClickjackingMiddleware                                        â”‚  â”‚
â”‚  â”‚  9. AccountMiddleware (Allauth)                                   â”‚  â”‚
â”‚  â”‚  10. DeviceFingerprintMiddleware â† à¦†à¦®à¦¾à¦¦à§‡à¦° Custom Middleware      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STEP 2: CustomTokenObtainPairView (views.py)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âœ“ Username à¦à¦¬à¦‚ Password Validate à¦•à¦°à§‡                           â”‚  â”‚
â”‚  â”‚  âœ“ User Authenticate à¦•à¦°à§‡                                         â”‚  â”‚
â”‚  â”‚  âœ“ JWT Token Generate à¦•à¦°à§‡ (Access + Refresh)                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         STEP 3: CustomTokenObtainPairSerializer.validate()              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  A. Device Fingerprint Calculate à¦•à¦°à§‡                             â”‚  â”‚
â”‚  â”‚     - User Agent                                                  â”‚  â”‚
â”‚  â”‚     - Accept Language                                             â”‚  â”‚
â”‚  â”‚     - Accept Encoding                                             â”‚  â”‚
â”‚  â”‚     - Screen Resolution (if available)                            â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  B. IP Address à¦¬à§‡à¦° à¦•à¦°à§‡                                           â”‚  â”‚
â”‚  â”‚     - X-Forwarded-For header check                                â”‚  â”‚
â”‚  â”‚     - REMOTE_ADDR fallback                                        â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  C. Geo-location Data fetch à¦•à¦°à§‡                                  â”‚  â”‚
â”‚  â”‚     - Country Code                                                â”‚  â”‚
â”‚  â”‚     - City                                                        â”‚  â”‚
â”‚  â”‚     - Timezone                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 4: DATABASE OPERATIONS                           â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  TABLE 1: frauddetect_device                                    â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚  Device.objects.get_or_create(                                 â”‚    â”‚
â”‚  â”‚      user = current_user,                                       â”‚    â”‚
â”‚  â”‚      fingerprint_hash = calculated_hash                         â”‚    â”‚
â”‚  â”‚  )                                                              â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚  à¦¯à¦¦à¦¿ à¦¨à¦¤à§à¦¨ Device à¦¹à¦¯à¦¼:                                          â”‚    â”‚
â”‚  â”‚    âœ“ à¦¨à¦¤à§à¦¨ Device entry à¦¤à§ˆà¦°à¦¿ à¦•à¦°à§‡                               â”‚    â”‚
â”‚  â”‚    âœ“ fingerprint_hash save à¦•à¦°à§‡                                 â”‚    â”‚
â”‚  â”‚    âœ“ last_ip save à¦•à¦°à§‡                                          â”‚    â”‚
â”‚  â”‚    âœ“ is_trusted = False (default)                               â”‚    â”‚
â”‚  â”‚    âœ“ status = 'normal'                                          â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚  à¦¯à¦¦à¦¿ à¦ªà§à¦°à¦¾à¦¤à¦¨ Device à¦¹à¦¯à¦¼:                                        â”‚    â”‚
â”‚  â”‚    âœ“ last_seen_at update à¦•à¦°à§‡                                   â”‚    â”‚
â”‚  â”‚    âœ“ last_ip update à¦•à¦°à§‡                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  TABLE 2: frauddetect_loginevent                                â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚  LoginEvent.objects.create(                                     â”‚    â”‚
â”‚  â”‚      user = current_user,                                       â”‚    â”‚
â”‚  â”‚      device = device_object,                                    â”‚    â”‚
â”‚  â”‚      ip_address = client_ip,                                    â”‚    â”‚
â”‚  â”‚      country = geo_data['country_code'],                        â”‚    â”‚
â”‚  â”‚      city = geo_data['city'],                                   â”‚    â”‚
â”‚  â”‚      is_successful = True,                                      â”‚    â”‚
â”‚  â”‚      is_suspicious = False,                                     â”‚    â”‚
â”‚  â”‚      created_at = timezone.now()                                â”‚    â”‚
â”‚  â”‚  )                                                              â”‚    â”‚
â”‚  â”‚                                                                  â”‚    â”‚
â”‚  â”‚  à¦¸à¦‚à¦°à¦•à§à¦·à¦¿à¦¤ à¦¤à¦¥à§à¦¯:                                                â”‚    â”‚
â”‚  â”‚    âœ“ à¦•à§‹à¦¨ User à¦²à¦—à¦‡à¦¨ à¦•à¦°à§‡à¦›à§‡                                      â”‚    â”‚
â”‚  â”‚    âœ“ à¦•à§‹à¦¨ Device à¦¥à§‡à¦•à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§‡à¦›à§‡                              â”‚    â”‚
â”‚  â”‚    âœ“ à¦•à§‹à¦¨ IP à¦¥à§‡à¦•à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§‡à¦›à§‡                                  â”‚    â”‚
â”‚  â”‚    âœ“ à¦•à§‹à¦¨ à¦¦à§‡à¦¶/à¦¶à¦¹à¦° à¦¥à§‡à¦•à§‡ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§‡à¦›à§‡                            â”‚    â”‚
â”‚  â”‚    âœ“ à¦²à¦—à¦‡à¦¨ à¦¸à¦«à¦² à¦¹à¦¯à¦¼à§‡à¦›à§‡ à¦•à¦¿à¦¨à¦¾                                     â”‚    â”‚
â”‚  â”‚    âœ“ à¦²à¦—à¦‡à¦¨ à¦¸à¦¨à§à¦¦à§‡à¦¹à¦œà¦¨à¦• à¦•à¦¿à¦¨à¦¾                                      â”‚    â”‚
â”‚  â”‚    âœ“ à¦•à¦–à¦¨ à¦²à¦—à¦‡à¦¨ à¦•à¦°à§‡à¦›à§‡                                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP 5: RESPONSE TO CLIENT                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  {                                                                â”‚  â”‚
â”‚  â”‚    "access": "eyJ0eXAiOiJKV1QiLCJhbGc...",                       â”‚  â”‚
â”‚  â”‚    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGc...",                      â”‚  â”‚
â”‚  â”‚    "user": {                                                      â”‚  â”‚
â”‚  â”‚      "id": 1,                                                     â”‚  â”‚
â”‚  â”‚      "username": "john_doe",                                      â”‚  â”‚
â”‚  â”‚      "email": "john@example.com",                                 â”‚  â”‚
â”‚  â”‚      "is_staff": false                                            â”‚  â”‚
â”‚  â”‚    },                                                             â”‚  â”‚
â”‚  â”‚    "device_id": 5,                                                â”‚  â”‚
â”‚  â”‚    "device_trusted": true                                         â”‚  â”‚
â”‚  â”‚  }                                                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ à¦ªà¦°à¦¬à¦°à§à¦¤à§€ Request à¦ Middleware à¦•à¦¿à¦­à¦¾à¦¬à§‡ à¦•à¦¾à¦œ à¦•à¦°à§‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AUTHENTICATED REQUEST (à¦¯à§‡à¦•à§‹à¦¨à§‹ API Call)                   â”‚
â”‚              GET /api/transactions/                                      â”‚
â”‚              Header: Authorization: Bearer <access_token>                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DeviceFingerprintMiddleware.process_request()                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  IF user.is_authenticated:                                        â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚    1. Device Fingerprint Calculate à¦•à¦°à§‡                           â”‚  â”‚
â”‚  â”‚       fingerprint_hash = calculate_device_fingerprint(request)    â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚    2. IP Address à¦¬à§‡à¦° à¦•à¦°à§‡                                         â”‚  â”‚
â”‚  â”‚       ip_address = get_client_ip(request)                         â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚    3. Request object à¦ attach à¦•à¦°à§‡                                â”‚  â”‚
â”‚  â”‚       request.device_fingerprint = fingerprint_hash               â”‚  â”‚
â”‚  â”‚       request.client_ip = ip_address                              â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚    4. Database à¦¥à§‡à¦•à§‡ Device à¦–à§‹à¦à¦œà§‡ à¦¬à¦¾ à¦¤à§ˆà¦°à¦¿ à¦•à¦°à§‡                   â”‚  â”‚
â”‚  â”‚       device, created = Device.objects.get_or_create(...)         â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚    5. Device info update à¦•à¦°à§‡                                     â”‚  â”‚
â”‚  â”‚       device.last_seen_at = now()                                 â”‚  â”‚
â”‚  â”‚       device.last_ip = ip_address                                 â”‚  â”‚
â”‚  â”‚       device.save()                                               â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚    6. Request à¦ device attach à¦•à¦°à§‡                                â”‚  â”‚
â”‚  â”‚       request.device = device                                     â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â”‚  ELSE:                                                            â”‚  â”‚
â”‚  â”‚    request.device = None                                          â”‚  â”‚
â”‚  â”‚    request.device_fingerprint = None                              â”‚  â”‚
â”‚  â”‚    request.client_ip = get_client_ip(request)                     â”‚  â”‚
â”‚  â”‚                                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VIEW FUNCTION à¦ à¦ªà§Œà¦à¦›à¦¾à¦¯à¦¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  à¦à¦–à¦¨ View Function à¦ access à¦ªà¦¾à¦¬à§‡à¦¨:                              â”‚  â”‚
â”‚  â”‚    - request.user (authenticated user)                            â”‚  â”‚
â”‚  â”‚    - request.device (device object)                               â”‚  â”‚
â”‚  â”‚    - request.device_fingerprint (fingerprint hash)                â”‚  â”‚
â”‚  â”‚    - request.client_ip (IP address)                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Database Tables à¦à¦¬à¦‚ à¦¤à¦¾à¦¦à§‡à¦° à¦¸à¦®à§à¦ªà¦°à§à¦•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATABASE SCHEMA                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    auth_user             â”‚  â† Django Default User Table
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                  â”‚
â”‚ username                 â”‚
â”‚ email                    â”‚
â”‚ password                 â”‚
â”‚ first_name               â”‚
â”‚ last_name                â”‚
â”‚ is_staff                 â”‚
â”‚ is_active                â”‚
â”‚ date_joined              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ One-to-Many
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ frauddetect_device       â”‚  â† Device Tracking Table
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                  â”‚
â”‚ user_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º auth_user.id
â”‚ fingerprint_hash         â”‚  â† Unique device identifier
â”‚ device_fingerprint       â”‚  â† Raw fingerprint data
â”‚ last_ip                  â”‚  â† à¦¶à§‡à¦· IP address
â”‚ last_seen_at             â”‚  â† à¦¶à§‡à¦· à¦•à¦–à¦¨ à¦¦à§‡à¦–à¦¾ à¦—à§‡à¦›à§‡
â”‚ is_trusted               â”‚  â† à¦¬à¦¿à¦¶à§à¦¬à¦¸à§à¦¤ à¦•à¦¿à¦¨à¦¾
â”‚ is_blocked               â”‚  â† à¦¬à§à¦²à¦• à¦•à¦°à¦¾ à¦•à¦¿à¦¨à¦¾
â”‚ status                   â”‚  â† normal/suspicious/blocked
â”‚ created_at               â”‚
â”‚ updated_at               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ One-to-Many
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ frauddetect_loginevent   â”‚  â† Login History Table
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                  â”‚
â”‚ user_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º auth_user.id
â”‚ device_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º frauddetect_device.id
â”‚ ip_address               â”‚  â† Login IP
â”‚ country                  â”‚  â† à¦¦à§‡à¦¶
â”‚ city                     â”‚  â† à¦¶à¦¹à¦°
â”‚ is_successful            â”‚  â† à¦¸à¦«à¦² à¦¹à¦¯à¦¼à§‡à¦›à§‡ à¦•à¦¿à¦¨à¦¾
â”‚ is_suspicious            â”‚  â† à¦¸à¦¨à§à¦¦à§‡à¦¹à¦œà¦¨à¦• à¦•à¦¿à¦¨à¦¾
â”‚ failure_reason           â”‚  â† à¦¬à§à¦¯à¦°à§à¦¥ à¦¹à¦²à§‡ à¦•à¦¾à¦°à¦£
â”‚ created_at               â”‚  â† Login time
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ frauddetect_transaction  â”‚  â† Transaction Table
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                  â”‚
â”‚ user_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º auth_user.id
â”‚ device_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º frauddetect_device.id
â”‚ external_txn_id          â”‚
â”‚ amount                   â”‚
â”‚ currency                 â”‚
â”‚ ip_address               â”‚  â† Transaction IP
â”‚ risk_score               â”‚  â† Fraud risk score
â”‚ risk_level               â”‚  â† low/medium/high
â”‚ is_suspicious            â”‚  â† à¦¸à¦¨à§à¦¦à§‡à¦¹à¦œà¦¨à¦• à¦•à¦¿à¦¨à¦¾
â”‚ status                   â”‚  â† pending/approved/rejected/flagged
â”‚ created_at               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ One-to-Many
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ frauddetect_fraudevent   â”‚  â† Fraud Alert Table
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                  â”‚
â”‚ user_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º auth_user.id
â”‚ transaction_id (FK) â”€â”€â”€â”€â”€â”¼â”€â”€â–º frauddetect_transaction.id
â”‚ triggered_rules          â”‚  â† à¦•à§‹à¦¨ rules trigger à¦¹à¦¯à¦¼à§‡à¦›à§‡
â”‚ risk_score               â”‚
â”‚ severity                 â”‚  â† low/medium/high/critical
â”‚ description              â”‚
â”‚ is_resolved              â”‚
â”‚ resolved_by_id (FK)      â”‚
â”‚ resolved_at              â”‚
â”‚ created_at               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ frauddetect_systemlog    â”‚  â† System Activity Log
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                  â”‚
â”‚ user_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º auth_user.id
â”‚ log_type                 â”‚  â† security/transaction/fraud_alert
â”‚ level                    â”‚  â† info/warning/error/critical
â”‚ message                  â”‚
â”‚ ip_address               â”‚
â”‚ metadata                 â”‚  â† JSON data
â”‚ created_at               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Middleware à¦à¦° à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤ à¦•à¦¾à¦œ

### middleware.py à¦à¦° à¦•à§‹à¦¡ à¦¬à¦¿à¦¶à§à¦²à§‡à¦·à¦£:

```python
class DeviceFingerprintMiddleware(MiddlewareMixin):
    """
    à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ Request à¦ Device Fingerprint à¦Ÿà§à¦°à§à¦¯à¦¾à¦• à¦•à¦°à§‡
    """
    
    def process_request(self, request):
        # à§§. à¦¶à§à¦§à§à¦®à¦¾à¦¤à§à¦° authenticated user à¦¦à§‡à¦° à¦œà¦¨à§à¦¯
        if request.user.is_authenticated:
            
            # à§¨. Fingerprint à¦¬à§‡à¦° à¦•à¦°à¦¾
            fingerprint_hash = calculate_device_fingerprint(request)
            # à¦à¦Ÿà¦¿ à¦•à¦°à§‡:
            # - User Agent à¦¥à§‡à¦•à§‡ browser/device info
            # - Accept-Language à¦¥à§‡à¦•à§‡ language
            # - Accept-Encoding à¦¥à§‡à¦•à§‡ encoding
            # - à¦¸à¦¬ à¦®à¦¿à¦²à¦¿à¦¯à¦¼à§‡ à¦à¦•à¦Ÿà¦¿ unique hash à¦¤à§ˆà¦°à¦¿ à¦•à¦°à§‡
            
            # à§©. IP Address à¦¬à§‡à¦° à¦•à¦°à¦¾
            ip_address = get_client_ip(request)
            # à¦à¦Ÿà¦¿ à¦•à¦°à§‡:
            # - X-Forwarded-For header check à¦•à¦°à§‡ (proxy à¦à¦° à¦œà¦¨à§à¦¯)
            # - à¦¨à¦¾ à¦¥à¦¾à¦•à¦²à§‡ REMOTE_ADDR à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§‡
            
            # à§ª. Request à¦ attach à¦•à¦°à¦¾ (à¦ªà¦°à§‡ à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦°à§‡à¦° à¦œà¦¨à§à¦¯)
            request.device_fingerprint = fingerprint_hash
            request.client_ip = ip_address
            
            # à§«. Device à¦–à§‹à¦à¦œà¦¾ à¦¬à¦¾ à¦¤à§ˆà¦°à¦¿ à¦•à¦°à¦¾
            device, created = Device.objects.get_or_create(
                user=request.user,
                fingerprint_hash=fingerprint_hash,
                defaults={
                    'last_ip': ip_address,
                    'device_fingerprint': fingerprint_hash,
                }
            )
            
            # à§¬. à¦¯à¦¦à¦¿ à¦†à¦—à§‡ à¦¥à§‡à¦•à§‡ à¦¥à¦¾à¦•à§‡, à¦¤à¦¾à¦¹à¦²à§‡ update à¦•à¦°à¦¾
            if not created:
                device.last_seen_at = timezone.now()
                device.last_ip = ip_address
                device.save(update_fields=['last_seen_at', 'last_ip'])
            
            # à§­. Request à¦ device attach à¦•à¦°à¦¾
            request.device = device
            
        else:
            # User authenticated à¦¨à¦¾ à¦¹à¦²à§‡
            request.device = None
            request.device_fingerprint = None
            request.client_ip = get_client_ip(request)
        
        return None  # Continue processing
```

---

## ğŸ“ˆ Data Flow à¦¸à¦¾à¦°à¦¾à¦‚à¦¶

```
Login Request
    â†“
JWT Authentication
    â†“
Device Fingerprint Calculate
    â†“
IP Address Extract
    â†“
Geo-location Fetch
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database Operations:   â”‚
â”‚  1. Device Table        â”‚ â† Device info save/update
â”‚  2. LoginEvent Table    â”‚ â† Login history save
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
Response with JWT Token
    â†“
Subsequent Requests
    â†“
Middleware Process
    â†“
Device Tracking Update
    â†“
View Function
    â†“
Transaction/API Logic
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database Operations:   â”‚
â”‚  3. Transaction Table   â”‚ â† Transaction save
â”‚  4. FraudEvent Table    â”‚ â† Fraud alert (if suspicious)
â”‚  5. SystemLog Table     â”‚ â† Activity log
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ à¦®à§‚à¦² à¦¬à§ˆà¦¶à¦¿à¦·à§à¦Ÿà§à¦¯

### à§§. Device Fingerprinting
- à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ device à¦à¦° à¦à¦•à¦Ÿà¦¿ unique identifier à¦¤à§ˆà¦°à¦¿ à¦•à¦°à§‡
- User Agent, Language, Encoding à¦¥à§‡à¦•à§‡ hash à¦¤à§ˆà¦°à¦¿
- Same device à¦¥à§‡à¦•à§‡ login à¦•à¦°à¦²à§‡ à¦šà¦¿à¦¨à¦¤à§‡ à¦ªà¦¾à¦°à§‡

### à§¨. Login Tracking
- à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ login attempt track à¦•à¦°à§‡
- IP address, location, time save à¦•à¦°à§‡
- Suspicious login detect à¦•à¦°à§‡

### à§©. Automatic Updates
- à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ request à¦ device info update à¦¹à¦¯à¦¼
- Last seen time update à¦¹à¦¯à¦¼
- IP address update à¦¹à¦¯à¦¼

### à§ª. Security Features
- Blocked device detect à¦•à¦°à§‡
- Suspicious activity flag à¦•à¦°à§‡
- Multiple device support à¦•à¦°à§‡

---

## ğŸ“ à¦‰à¦¦à¦¾à¦¹à¦°à¦£: à¦à¦•à¦Ÿà¦¿ à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦²à¦—à¦‡à¦¨ à¦¸à§‡à¦¶à¦¨

```
1. User à¦²à¦—à¦‡à¦¨ à¦•à¦°à§‡:
   POST /api/auth/login/
   { "username": "john", "password": "pass123" }

2. System à¦•à¦°à§‡:
   âœ“ Password verify à¦•à¦°à§‡
   âœ“ Device fingerprint calculate à¦•à¦°à§‡: "abc123xyz"
   âœ“ IP address à¦ªà¦¾à¦¯à¦¼: "192.168.1.100"
   âœ“ Location à¦ªà¦¾à¦¯à¦¼: "Bangladesh, Dhaka"

3. Database à¦ save à¦¹à¦¯à¦¼:
   
   frauddetect_device:
   â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ id â”‚ user_id â”‚ fingerprint  â”‚ last_ip         â”‚ is_trusted   â”‚
   â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 5  â”‚ 1       â”‚ abc123xyz    â”‚ 192.168.1.100   â”‚ true         â”‚
   â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   frauddetect_loginevent:
   â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ id â”‚ user_id â”‚ device_id â”‚ ip_address      â”‚ country    â”‚ city     â”‚
   â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 10 â”‚ 1       â”‚ 5         â”‚ 192.168.1.100   â”‚ BD         â”‚ Dhaka    â”‚
   â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. Response à¦ªà¦¾à¦¯à¦¼:
   {
     "access": "jwt_token...",
     "refresh": "refresh_token...",
     "device_id": 5,
     "device_trusted": true
   }

5. à¦ªà¦°à¦¬à¦°à§à¦¤à§€ request à¦:
   GET /api/transactions/
   Header: Authorization: Bearer jwt_token...
   
   Middleware automatically:
   âœ“ Device detect à¦•à¦°à§‡
   âœ“ last_seen_at update à¦•à¦°à§‡
   âœ“ request.device attach à¦•à¦°à§‡
   
6. View function à¦:
   request.user â†’ User object
   request.device â†’ Device object
   request.client_ip â†’ "192.168.1.100"
```

---

à¦à¦‡ à¦¸à¦®à§à¦ªà§‚à¦°à§à¦£ à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦® à¦†à¦ªà¦¨à¦¾à¦° fraud detection à¦à¦° à¦œà¦¨à§à¦¯ device tracking à¦à¦¬à¦‚ login monitoring provide à¦•à¦°à¦›à§‡!
